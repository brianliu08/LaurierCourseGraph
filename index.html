<!DOCTYPE html>
<html>
  <head>
	<title>core-scaffold</title>
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
	<meta name="mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-capable" content="yes">
	
	<script src="bower_components/platform/platform.js"></script>
	
	<link rel="import"
		  href="bower_components/core-scaffold/core-scaffold.html">
	<link rel="import"
		  href="bower_components/core-header-panel/core-header-panel.html">
	<link rel="import"
		  href="bower_components/core-menu/core-menu.html">
	<link rel="import"
		  href="bower_components/core-menu/core-submenu.html">
	<link rel="import"
		  href="bower_components/core-item/core-item.html">
	<link rel="import"
		  href="bower_components/core-ajax/core-ajax.html">
	<link rel="import"
		  href="tag-list.html">
	<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
	<script type="text/javascript" language="javascript" src="dep.json"></script> 
	<style>
	 
     html, body {
       height: 100%;
       margin: 0;
     }
	 
     body {
       font-family: sans-serif;
     }
     
     core-scaffold {
       position: absolute;
       top: 0;
       right: 0;
       bottom: 0;
       left: 0;
     }

	 core-toolbar {
	   background-color: #526E9C;
	   color: #fff;
	 }
     
	</style>
	
  </head>
  
  <body unresolved>
	<script>
	 window.addEventListener('polymer-ready', function(e) {
	   
	   var facultyTag = document.querySelector('#faculty');
	   var departmentTag = document.querySelector('#department');
	   faculty.tags = Object.keys(dep);
	   
	   window.addEventListener('Faculty-updated', function(e) {
		 console.log('fac updated');
		 var departments = [];
		 facultyActiveList = facultyTag.active['Faculty']
		 console.log(facultyActiveList)
		 for (var i = 0; i < facultyActiveList.length; i++) {
		   var faculty = facultyActiveList[i]
		   console.log(faculty)
		   departments = departments.concat(Object.keys(dep[faculty]));
		 }
		 departmentTag.tags = departments;
	   });
	   
	   window.addEventListener('Department-updated', function(e) {
		 console.log('dep updated');
		 var classes = {};
		 departmentActiveList = departmentTag.active['Department'];
		 console.log('dep active list', departmentActiveList)
		 facultyActiveList = facultyTag.active['Faculty'];
		 console.log(departmentActiveList);
		 for (var i = 0; i < departmentActiveList.length; i++) {
		   var department = departmentActiveList[i];
		   console.log(department);
		   for (var j = 0; j < facultyActiveList.length; j++) {
			 faculty = facultyActiveList[j];
			 if (dep[faculty][department] != undefined) {
			   classKeys = Object.keys(dep[faculty][department])
			   for (var k = 0; k < classKeys.length; k++) {
				 key = classKeys[k]
				 classes[key] = dep[faculty][department][key];
			   }
			 }
		   }
		 }
		 console.log(classes)
	   });
	 });
	</script>
	  
	<core-scaffold>
      <core-header-panel navigation flex mode="seamed">
		<core-toolbar >Course Graph</core-toolbar>
		<tag-list id="faculty" title="Faculty"></tag-list>
		<tag-list id="department" title="Department"></tag-list>
      </core-header-panel>
      
      <div tool>Title</div>
      
      <div>
	  </div>
	  
	</core-scaffold>

	<script>
	 
	</script>
	
  </body>
</html>
